<template x-if="mode === 'mistake'">
    <div class="w-72 h-full glass-panel ml-4 mb-4 flex flex-col overflow-hidden z-30 border-r border-white/10 relative animate-fade-in">
        
        <div class="p-5 border-b border-white/10 bg-white/5">
            <h3 class="font-bold text-lg truncate" x-text="bookData.info?.name || t('loading')"></h3>
            <div class="flex flex-wrap gap-1 mt-2">
                <template x-for="tag in (bookData.info?.tags || [])">
                    <span class="px-1.5 py-0.5 rounded bg-blue-500/20 text-blue-500 text-[10px] font-bold uppercase" x-text="tag"></span>
                </template>
            </div>
        </div>

        <div class="flex-1 overflow-y-auto p-3 space-y-2 no-scrollbar">
            <div @click="currentQIndex = -1" 
                 class="p-3 rounded-xl cursor-pointer transition-all flex items-center gap-3"
                 :class="currentQIndex === -1 ? 'bg-blue-500 text-white shadow-lg' : 'hover:bg-white/10 dark:hover:bg-white/5'">
                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"></path></svg>
                <span class="text-sm font-bold" x-text="t('overview')">Overview</span>
            </div>
            
            <div x-show="bookData.sub_notebooks && bookData.sub_notebooks.length > 0">
                 <div class="text-[10px] font-bold uppercase opacity-40 px-3 mt-4 mb-2" x-text="t('folders')">Folders</div>
                 <template x-for="sub in bookData.sub_notebooks" :key="sub.id">
                     <div @click="loadBook(sub.id)" 
                          class="p-3 rounded-xl cursor-pointer transition-all flex items-center gap-3 hover:bg-yellow-500/10 text-yellow-600 dark:text-yellow-500">
                         <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24"><path d="M10 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2h-8l-2-2z"></path></svg>
                         <div class="flex-1 min-w-0">
                             <div class="text-sm font-bold truncate" x-text="sub.name"></div>
                             <div class="text-[10px] opacity-60" x-text="sub.count + t('items_suffix')"> items</div>
                         </div>
                     </div>
                 </template>
            </div>

            <div class="h-px bg-white/10 my-2"></div>
            
            <div class="text-[10px] font-bold uppercase opacity-40 px-3 mb-2" x-text="t('questions_list')">Questions</div>

            <template x-for="(item, idx) in bookData.questions" :key="item.id">
                <div @click="jumpToQuestion(idx)" 
                     class="p-3 rounded-xl cursor-pointer transition-all group border border-transparent hover:border-white/10"
                     :class="currentQIndex === idx ? 'bg-white/20 dark:bg-white/10 border-white/20' : 'hover:bg-white/5'">
                    <div class="flex justify-between items-start mb-1">
                        <span class="text-xs font-bold opacity-50" x-text="'Q' + (idx+1)"></span>
                        <div class="w-2 h-2 rounded-full" :class="item.proficiency > 80 ? 'bg-green-500' : (item.proficiency > 40 ? 'bg-yellow-500' : 'bg-red-500')"></div>
                    </div>
                    <div class="text-sm font-medium opacity-80 truncate" x-text="item.summary"></div>
                </div>
            </template>
        </div>
    </div>
</template>